"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const path_1 = require("path");
class TypeScriptBinaryLoader {
    load() {
        if (this.tsBinary) {
            return this.tsBinary;
        }
        const nodeModulePaths = [
            path_1.join(process.cwd(), 'node_modules'),
            ...module.paths,
        ];
        let tsBinary;
        for (const path of nodeModulePaths) {
            const binaryPath = path_1.resolve(path, 'typescript');
            if (fs_1.existsSync(binaryPath)) {
                tsBinary = require(binaryPath);
                break;
            }
        }
        if (!tsBinary) {
            throw new Error('TypeScript could not be found! Please, install "typescript" package.');
        }
        this.tsBinary = tsBinary;
        return tsBinary;
    }
}
exports.TypeScriptBinaryLoader = TypeScriptBinaryLoader;
